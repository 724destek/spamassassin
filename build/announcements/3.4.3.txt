To: users@spamassassin.apache.org, dev@spamassassin.apache.org, announce@apache.org
Subject: ANNOUNCE: Apache SpamAssassin 3.4.3 available

Release Notes -- Apache SpamAssassin -- Version 3.4.3

Introduction
------------

Apache SpamAssassin 3.4.3 contains numerous tweaks and bug fixes as we
prepare to move to version 4.0.0 with better, native UTF-8 handling.

There are a number of functional patches, improvements as well as security
reasons to upgrade to 3.4.3.  In this release, there are bug fixes for two
CVEs.

*** On March 1, 2020, we will stop publishing rulesets with SHA-1 signatures.
    If you do not update to 3.4.2 or later, you will be stuck at the last
    ruleset with SHA-1 signatures. ***

Many thanks to the committers, contributors, rule testers, mass checkers,
and code testers who have made this release possible.

Happy Birthday
--------------
Apache SpamAssassin turned 18 on September 5th, 2019.

Now in its 18th year, 15 of which as an Apache project, SpamAssassin is the
world's most popular email anti-spam platform. Apache SpamAssassin can be
used on a wide variety of email systems including Postfix, procmail, qmail,
sendmail, and more.

It serves as the spam-filtering and detection solution for numerous ISPs and
hosting providers, and is integrated in commercial software including Plesk,
cPanel, Vesta Control Panel, and many others.

SpamAssassin was originally created by Justin Mason, who had maintained a
number of patches against an earlier program named filter.plx by Mark
Jeftovic, which began in August 1997. Mason rewrote all of Jeftovic's code
from scratch and uploaded the resulting codebase to SourceForge on April 20,
2001. SpamAssassin entered the Apache Incubator in December 2003 and
graduated as an Apache Top-Level Project in June 2004.

Notable features:
=================

New plugins
-----------
There is 1 new plugin added with this release:

# OLEVBMacro - Detects both OLE macros and VB code inside Office documents
#
# It tries to discern between safe and malicious code but due to the threat
# macros present to security, many places block these type of documents
# outright.
#
# For this plugin to work, Archive::Zip and IO::String modules are required.
# loadplugin Mail::SpamAssassin::Plugin::OLEVBMacro


This plugin is disabled by default. To enable, uncomment the loadplugin
configuration options in file v343.pre, or add it to some local .pre file
such as local.pre.

Notable changes
---------------

Safer and faster scanning of large emails using body_part_scan_size and
rawbody_part_scan_size settings.

New tflag "nosubject" for 'body' rules, to stop matching the Subject header
which is part of the body text.

Two CVE security bug fixes are included in this release:

  CVE-2019-12420 for Multipart Denial of Service Vulnerability

  CVE-2018-11805 for nefarious CF files can be configured to
  run system commands without any output or errors.

Security updates include deprecation of the unsafe sa-update '--allowplugins'
option, which now prints a warning that '--reallyallowplugins' is required
to use it.

New configuration options
-------------------------

A new subjprefix keyword used to add a prefix to the subject of the
email if a rule is matched.

A new template tag _SUBJPREFIX_ that maps to the subject prefix that
has been added by the subjprefix keyword.

A new template tag _SUBTESTSCOLLAPSED(,)_ that maps to subtests that
hits with duplicated rules collapsed.

A config option rbl_headers has been added to DNSEval plugin,
this option is used to specify in which headers check_rbl_headers
should check for content used to query the specified rbl.

A new check_rbl_ns_from function has been added to check
the dns server of the from addrs domain name against a specific rbl.

A new check_rbl_rcvd function has been added to check
all received headers domains or ip addresses against a
specific rbl.

New options has been added to check_hashbl_emails function
has been added; it is now possible to specify in which headers
the function should check for content used to query the
specified rbl and an acl to filter the email addresses the rule
should apply.

A new check_hashbl_bodyre function has been added, it is now possible
to search body for matching regexp and query the string captured
against the specified rbl.

A new check_hashbl_uris function has been added, it is now possible
to match uris in email's body and query the uris against the
specified rbl.

Notable Internal changes
------------------------

None noted.

Other updates
-------------

None noted.

Optimizations
-------------

None noted.

Downloading and availability
----------------------------

Downloads are available from:

https://spamassassin.apache.org/downloads.cgi

sha256sum of archive files:

  586a45d89e446f5c86ae48417e483b83057771ec463b7e941a45ae6e090f0b42  Mail-SpamAssassin-3.4.3.tar.bz2
  a4f139aeb13f95c2dab10a11a8390e6a9c7abffc3597816b1129b64d921f4cae  Mail-SpamAssassin-3.4.3.tar.gz
  c158a5cbe582b6d8e9b5cb4aff817da461909409445ea253f33716f9753bb4c4  Mail-SpamAssassin-3.4.3.zip
  4e4e8943f065f198b99312da06e62899451c87a115284c6e734601d21f1c568e  Mail-SpamAssassin-rules-3.4.3.r1870871.tgz

sha512sum of archive files:

  bdbe9a32f87b3d68d7889db61d806cec7caa41ba199df84329343703ed171f8ed9166fc184fb094a7c0e56a7bab8b920995dd82ea3f192cdd08b0c2d66056993  Mail-SpamAssassin-3.4.3.tar.bz2
  d0e105d76e09dfb359638fe2ee1ecc551948c0d150411afe2e9f040098494878188f798f7c559bbf23a3854a5e8fc50d8a046251730f5ec7fba5073ce2a4aa6d  Mail-SpamAssassin-3.4.3.tar.gz
  1d2e1426aa34c055d72ea9e1bbeeaf4056f2f9706846d2e4e6a40c4ad724f2f9b87af907567e74803e09b84297a4edba2d3f5a47ae747cc9cb271e75d59b94d7  Mail-SpamAssassin-3.4.3.zip
  d48e44a9ce52dae5de094967f9893988b2e160f5db18fe37cfb85987be027c1cb659f5ba075798fe33044d1671c17391275b745118a1613c937ed0c322a66327  Mail-SpamAssassin-rules-3.4.3.r1870871.tgz

Note that the *-rules-*.tgz files are only necessary if you cannot,
or do not wish to, run "sa-update" after install to download the latest
fresh rules.

See the INSTALL and UPGRADE files in the distribution for important
installation notes.


GPG Verification Procedure
--------------------------
The release files also have a .asc accompanying them.  The file serves
as an external GPG signature for the given release file.  The signing
key is available via the wwwkeys.pgp.net key server, as well as
https://www.apache.org/dist/spamassassin/KEYS



The following key is used to sign releases after, and including SA 3.3.0:

pub   4096R/F7D39814 2009-12-02
      Key fingerprint = D809 9BC7 9E17 D7E4 9BC2  1E31 FDE5 2F40 F7D3 9814
uid                  SpamAssassin Project Management Committee <private@spamassassin.apache.org>
uid                  SpamAssassin Signing Key (Code Signing Key, replacement for 1024D/265FA05B) <dev@spamassassin.apache.org>
sub   4096R/7B3265A5 2009-12-02

The following key is used to sign rule updates:

pub   4096R/5244EC45 2005-12-20
      Key fingerprint = 5E54 1DC9 59CB 8BAC 7C78  DFDC 4056 A61A 5244 EC45
uid                  updates.spamassassin.org Signing Key <release@spamassassin.org>
sub   4096R/24F434CE 2005-12-20

To verify a release file, download the file with the accompanying .asc
file and run the following commands:

  gpg --verbose --keyserver wwwkeys.pgp.net --recv-key F7D39814
  gpg --verify Mail-SpamAssassin-3.4.3.tar.bz2.asc
  gpg --fingerprint F7D39814

Then verify that the key matches the signature.

Note that older versions of gnupg may not be able to complete the steps
above. Specifically, GnuPG v1.0.6, 1.0.7 & 1.2.6 failed while v1.4.11
worked flawlessly.

See https://www.apache.org/info/verification.html for more information
on verifying Apache releases.


About Apache SpamAssassin
-------------------------

Apache SpamAssassin is a mature, widely-deployed open source project
that serves as a mail filter to identify spam. SpamAssassin uses a
variety of mechanisms including mail header and text analysis, Bayesian
filtering, DNS blocklists, and collaborative filtering databases. In
addition, Apache SpamAssassin has a modular architecture that allows
other technologies to be quickly incorporated as an addition or as a
replacement for existing methods.

Apache SpamAssassin typically runs on a server, classifies and labels
spam before it reaches your mailbox, while allowing other components of
a mail system to act on its results.

Most of the Apache SpamAssassin is written in Perl, with heavily
traversed code paths carefully optimized. Benefits are portability,
robustness and facilitated maintenance. It can run on a wide variety of
POSIX platforms.

The server and the Perl library feels at home on Unix and Linux platforms
and reportedly also works on MS Windows systems under ActivePerl.

For more information, visit https://spamassassin.apache.org/


About The Apache Software Foundation
------------------------------------

Established in 1999, The Apache Software Foundation provides
organizational, legal, and financial support for more than 100
freely-available, collaboratively-developed Open Source projects. The
pragmatic Apache License enables individual and commercial users to
easily deploy Apache software; the Foundation's intellectual property
framework limits the legal exposure of its 2,500+ contributors.

For more information, visit https://www.apache.org/
